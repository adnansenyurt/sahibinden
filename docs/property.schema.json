{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/jh/emlak/sahibinden/docs/property.schema.json",
  "title": "Sahibinden Property Import",
  "description": "JSON Schema for a single property object produced by the Chrome extension and posted to the Emlak service.",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "description": "Listing ID scraped from page or inferred from URL. Used to relate notes."
    },
    "url": {
      "type": "string",
      "format": "uri",
      "description": "Canonical listing URL."
    },
    "title": { "type": "string", "description": "Listing title." },
    "description": { "type": "string", "description": "Free-text description from detail page." },
    "type": {
      "type": "string",
      "enum": ["SALE", "RENT"],
      "description": "Listing type inferred from URL (/satilik/ -> SALE, /kiralik/ -> RENT)."
    },
    "priceCurrency": {
      "type": "string",
      "enum": ["TRY", "USD", "EUR", "GBP"],
      "description": "Currency code inferred from price text. Defaults to TRY."
    },
    "priceText": { "type": "string", "description": "Raw price text as seen on page." },
    "price": { "type": ["number", "null"], "description": "Numeric price parsed from priceText (best-effort)." },
    "locationText": { "type": "string", "description": "Raw location line like 'Istanbul / Kadikoy / Rasimpasa Mh.'." },
    "city": { "type": "string", "description": "Parsed city." },
    "district": { "type": "string", "description": "Parsed district." },
    "neighborhood": { "type": "string", "description": "Parsed neighborhood or remaining parts." },
    "mapUrl": { "type": "string", "format": "uri", "description": "Google Maps URL built from page coordinates when available." },
    "parcelUrl": { "type": "string", "format": "uri", "description": "TKGM Parsel URL when coordinates are present." },
    "latitude": {
      "type": ["number", "null"],
      "minimum": -90,
      "maximum": 90,
      "description": "Decimal latitude extracted from mapUrl (if present)."
    },
    "longitude": {
      "type": ["number", "null"],
      "minimum": -180,
      "maximum": 180,
      "description": "Decimal longitude extracted from mapUrl (if present)."
    },
    "contactName": { "type": "string", "description": "Agent/owner name from page." },
    "contactPhone": { "type": "string", "description": "Agent/office phone (unformatted)." },
    "listingFrom": { "type": "string", "description": "'Kimden' field (owner/real estate office etc.)." },
    "frontageText": { "type": "string", "description": "'Cephe' value(s) as text." },
    "opennessText": { "type": "string", "description": "Cevre openness summary lines." },
    "frontageOpennessText": { "type": "string", "description": "Openness limited to selected frontage directions." },
    "nearestTransportText": { "type": "string", "description": "Lines describing nearest metro/bus etc." },
    "summary": { "type": "string", "description": "AI-generated summary if enabled; otherwise empty string." },
    "source": {
      "type": "string",
      "const": "sahibinden",
      "description": "Data source identifier."
    },

    "listingId": { "type": "string", "description": "Translated from 'Ilan No'." },
    "propertyType": { "type": "string", "description": "Translated from 'Emlak Tipi' (e.g., 'Satilik Daire')." },
    "grossArea": { "type": "string", "description": "Translated from 'm2 (Brut)' - gross square meters." },
    "netArea": { "type": "string", "description": "Translated from 'm2 (Net)' - net square meters." },
    "roomCount": { "type": "string", "description": "Translated from 'Oda Sayisi' (e.g., '3+1')." },
    "buildingAge": { "type": "string", "description": "Translated from 'Bina Yasi' (e.g., '5-10 arasi')." },
    "floor": { "type": "string", "description": "Translated from 'Bulundugu Kat'." },
    "totalFloors": { "type": "string", "description": "Translated from 'Kat Sayisi'." },
    "heating": { "type": "string", "description": "Translated from 'Isitma' (e.g., 'Dogalgaz (Kombi)')." },
    "bathroomCount": { "type": "string", "description": "Translated from 'Banyo Sayisi'." },
    "balcony": { "type": "string", "description": "Translated from 'Balkon' (Var/Yok)." },
    "furnished": { "type": "string", "description": "Translated from 'Esyali' (Esyali/Esyasiz)." },
    "usageStatus": { "type": "string", "description": "Translated from 'Kullanim Durumu' (Bos/Kiraci Var/etc.)." },
    "inComplex": { "type": "string", "description": "Translated from 'Site Icerisinde' (Evet/Hayir)." },
    "dues": { "type": "string", "description": "Translated from 'Aidat' - monthly maintenance fee." },
    "exchange": { "type": "string", "description": "Translated from 'Takas' (Evet/Hayir)." },
    "mortgageEligible": { "type": "string", "description": "Translated from 'Krediye Uygun' (Evet/Hayir)." },
    "frontage": { "type": "string", "description": "Translated from 'Cephe' (compass directions)." },
    "location": { "type": "string", "description": "Translated from 'Il / Ilce'." },
    "buildingType": { "type": "string", "description": "Translated from 'Yapi Tipi'." },
    "buildingCondition": { "type": "string", "description": "Translated from 'Yapinin Durumu'." },
    "housingType": { "type": "string", "description": "Translated from 'Konut Sekli'." },
    "parking": { "type": "string", "description": "Translated from 'Otopark'." },
    "elevator": { "type": "string", "description": "Translated from 'Asansor' (Var/Yok)." },
    "security": { "type": "string", "description": "Translated from 'Guvenlik'." },
    "swimmingPool": { "type": "string", "description": "Translated from 'Yuzme Havuzu' (Var/Yok)." },
    "gym": { "type": "string", "description": "Translated from 'Spor Salonu' (Var/Yok)." },
    "doorman": { "type": "string", "description": "Translated from 'Kapici' (Var/Yok)." },
    "complexOwned": { "type": "string", "description": "Translated from 'Siteye Ait'." },
    "residenceType": { "type": "string", "description": "Translated from 'Konut Tipi'." },
    "deedStatus": { "type": "string", "description": "Translated from 'Tapu Durumu'." },
    "deposit": { "type": "string", "description": "Translated from 'Depozito'." },
    "investmentSuitable": { "type": "string", "description": "Translated from 'Yatirima Uygun' (Evet/Hayir)." },
    "middleFloor": { "type": "string", "description": "Translated from 'Ara Kat'." },
    "groundFloor": { "type": "string", "description": "Translated from 'En Alt Kat'." },
    "topFloor": { "type": "string", "description": "Translated from 'En Ust Kat'." },
    "entryFloor": { "type": "string", "description": "Translated from 'Giris Kati'." },
    "gardenFloor": { "type": "string", "description": "Translated from 'Bahce Kati'." },
    "privateEntrance": { "type": "string", "description": "Translated from 'Mustakil Giris'." },
    "penthouse": { "type": "string", "description": "Translated from 'Cati Kati'." },
    "groundLevel": { "type": "string", "description": "Translated from 'Zemin Kat'." },
    "landArea": { "type": "string", "description": "Translated from 'Arsa m2'." },
    "blockNumber": { "type": "string", "description": "Translated from 'Ada No'." },
    "parcelNumber": { "type": "string", "description": "Translated from 'Parsel No'." },
    "sheetNumber": { "type": "string", "description": "Translated from 'Pafta No'." },
    "buildingHeight": { "type": "string", "description": "Translated from 'Gabari'." },
    "floorAreaRatio": { "type": "string", "description": "Translated from 'Kaks' (floor area ratio)." },
    "buildingCoverageRatio": { "type": "string", "description": "Translated from 'Taks' (building coverage ratio)." },
    "zoningStatus": { "type": "string", "description": "Translated from 'Imar Durumu'." },

    "image": {
      "type": ["object", "null"],
      "description": "First/main image from the listing (when available).",
      "additionalProperties": false,
      "properties": {
        "base64": {
          "type": "string",
          "description": "Data URL for embedding (image/*;base64,...).",
          "pattern": "^data:image\\/[^;]+;base64,"
        },
        "width": { "type": "integer", "minimum": 1 },
        "height": { "type": "integer", "minimum": 1 }
      },
      "required": ["base64", "width", "height"]
    },
    "notes": {
      "type": "array",
      "description": "Per-listing notes collected locally.",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "type": { "type": "string", "enum": ["public", "private"] },
          "text": { "type": "string" },
          "updatedAt": { "type": "string", "format": "date-time" }
        },
        "required": ["type", "text", "updatedAt"]
      }
    },
    "original": {
      "type": "object",
      "description": "Raw scraped row as produced by scraper (Turkish keys), for traceability.",
      "additionalProperties": true
    },
    "scrapedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Generation timestamp (ISO)."
    }
  },
  "required": ["id", "url", "type", "priceCurrency", "scrapedAt", "original"]
}
